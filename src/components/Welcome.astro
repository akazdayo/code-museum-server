---

---

<div>
	<h1>コードの投稿</h1>
	<p>コードを投稿して、他の人と共有しましょう。</p>
	<textarea id="code" rows="10" cols="50"></textarea>
	<br />
	<textarea id="language" name="5" id="30"></textarea>
	<br />
	<textarea id="title" rows="1" cols="15"></textarea>
	<br />
	<button id="postButton">投稿</button>
</div>

<script>
	const postButton = document.getElementById("postButton");

	postButton?.addEventListener("click", async () => {
		const code = document.getElementById("code")?.value;
		const language = document.getElementById("language")?.value;
		const title = document.getElementById("title")?.value;

		if (!code || !language || !title) {
			alert("Please fill in all fields.");
			return;
		}

		try {
			const response = await fetch("/api/upload", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
				},
				body: JSON.stringify({ code, language, title }),
			});

			if (response.ok) {
				alert("Code posted successfully!");
			} else {
				alert("Failed to post code.");
			}
		} catch (error) {
			console.error("Error:", error);
			alert("An error occurred while posting the code.");
		}
	});
</script>
